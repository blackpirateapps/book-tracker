<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Migration - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <style>
        :root { font-family: 'Inter', sans-serif; }
        @supports (font-variation-settings: normal) { :root { font-family: 'Inter var', sans-serif; } }
        body { background-color: #f8f8f8; }
        .modal-content { transition: transform 0.3s ease-out, opacity 0.3s ease-out; }
    </style>
</head>
<body>
    <div id="migration-page">
        <!-- Header -->
        <header class="sticky top-0 bg-white/80 backdrop-blur-md z-20 border-b">
            <div class="max-w-4xl mx-auto py-4 px-4">
                 <div class="flex justify-between items-center">
                    <a href="/dashboard/library.html" class="text-sm font-semibold text-blue-600 hover:underline">&larr; Back to Library</a>
                    <h1 class="text-xl font-bold tracking-tight text-gray-900">Image Migration</h1>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-2xl mx-auto py-8 px-4">
            <div class="bg-white rounded-xl border p-6">
                <h2 class="text-lg font-semibold text-gray-900">Migrate Book Covers to Vercel Blob</h2>
                <p class="text-sm text-gray-600 mt-2 mb-4">This tool will find books using external cover images, compress them to WebP, and store them permanently in your Vercel Blob Storage for better performance. This process is safe to run multiple times.</p>
                <button id="start-migration-btn" class="w-full bg-blue-600 text-white font-semibold py-2.5 px-4 rounded-lg hover:bg-blue-700">Start Migration</button>
                <div id="migration-status" class="mt-4 text-sm text-center text-gray-500"></div>
                <div id="migration-log" class="mt-4 p-4 bg-gray-50 rounded-lg text-xs text-gray-600 font-mono h-48 overflow-y-auto hidden"></div>
            </div>
        </main>
    </div>

    <!-- Password Modal -->
    <div id="password-modal" class="modal-backdrop fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden opacity-0 transition-opacity duration-300">
        <div class="modal-content bg-white rounded-xl shadow-lg w-full max-w-sm p-6 opacity-0 scale-95">
            <h2 class="text-lg font-bold text-gray-900 mb-4">Enter Password</h2>
            <p class="text-sm text-gray-600 mb-4">Migration requires the admin password.</p>
            <input type="password" id="password-input" class="w-full p-2 border rounded-lg bg-gray-50 mb-4" placeholder="••••••••">
            <div class="flex items-center mb-4">
                <input id="remember-me" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                <label for="remember-me" class="ml-2 block text-sm text-gray-900">Remember me</label>
            </div>
            <div class="flex justify-end gap-2">
                <button id="password-cancel-btn" type="button" class="bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300">Cancel</button>
                <button id="password-submit-btn" type="button" class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700">Confirm</button>
            </div>
        </div>
    </div>
    
    <script src="admin.js" defer></script>
</body>
</html>

